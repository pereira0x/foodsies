:root{
  /* Dark (default) */
  --bg:#0b0e13; --panel:#121720; --muted:#8a96a6; --text:#e6edf3; --primary:#3b82f6; --danger:#ef4444; --ok:#10b981; --border:#1f2836;
}
:root[data-theme="light"]{
  /* Light */
  --bg:#f6f8fa; --panel:#ffffff; --muted:#57606a; --text:#24292f; --primary:#2563eb; --danger:#dc2626; --ok:#059669; --border:#d0d7de;
}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;font:14px/1.45 system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;background:var(--bg);color:var(--text)}
.topbar{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;border-bottom:1px solid var(--border);background:var(--panel);position:sticky;top:0;z-index:5}
.topbar h1{margin:0;font-size:18px;letter-spacing:.3px}
.tabs a{color:var(--text);text-decoration:none;margin-left:10px;padding:6px 10px;border-radius:6px}
.tabs a.active{background:var(--primary);} 
.tabs #btn-toggle-theme{margin-left:10px}

main{max-width:1000px;margin:24px auto;padding:0 16px}
.hidden{display:none}
.toolbar{display:flex;gap:8px;align-items:center;margin-bottom:12px}
input, select, textarea, button{background:var(--panel);color:var(--text);border:1px solid var(--border);border-radius:8px;padding:8px 10px;outline:none}
input[type="search"]{flex:1}
button{cursor:pointer}
button.primary{background:var(--primary);border-color:transparent}
button.secondary{border-color:var(--primary);}
button.ghost{background:transparent}
button.danger{background:var(--danger);border-color:transparent}
/* Ensure contrast on colored surfaces in light mode */
button.primary, button.danger{color:#fff}
.tabs a.active{color:#fff}
.smallmuted{color:var(--muted);font-size:12px}

.card-list{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:12px}
.card{display:flex;justify-content:space-between;gap:8px;background:var(--panel);border:1px solid var(--border);border-radius:10px;padding:12px}
.card .title{font-weight:600}
.card .subtitle{color:var(--muted);font-size:12px;margin-top:2px}
.card .stats{margin-top:6px;font-size:13px}
.card-actions{display:flex;gap:8px}

dialog{border:none;border-radius:12px;padding:0;max-width:720px;width:95vw;background:var(--panel);color:var(--text)}
.dialog-form{padding:12px}
.dialog-form header{padding:4px 4px 12px 4px;border-bottom:1px solid var(--border)}
.dialog-form footer{padding-top:12px;border-top:1px solid var(--border);display:flex;gap:8px;justify-content:flex-end}
.grid{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-top:12px}
.grid .fullrow{grid-column:1/-1}

.meal-composer{border:1px solid var(--border);border-radius:10px;padding:12px;margin-bottom:16px}
.meal-items{display:flex;flex-direction:column;gap:8px;margin-bottom:8px}
.meal-item{display:grid;grid-template-columns:3fr 1.2fr 1.5fr 2fr auto;gap:8px;align-items:center}
.mi-remove{padding:6px 10px}
.totals{display:flex;gap:16px;margin-top:8px;font-size:15px}
.delta.over{color:var(--danger)}
.delta.under{color:var(--ok)}

.existing-meals h3{margin:12px 0}

.settings .row{display:flex;gap:8px;margin:8px 0}

@media(max-width:700px){
  .grid{grid-template-columns:1fr}
  .meal-item{grid-template-columns:1fr 1fr 1fr 1fr auto}
}
